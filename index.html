<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anchorite - Your Spiritual Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-sm">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-gray-900 dark:text-white">Anchorite</h1>
                </div>
                <div class="flex space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <i class="fas fa-moon text-gray-600 dark:text-gray-300"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main App Container -->
    <div class="max-w-4xl mx-auto py-8 px-4">
        <!-- Library Section -->
        <section id="library-section" class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Your Library</h2>
                <div class="relative">
                    <select id="book-select" class="appearance-none bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 pr-8 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Add more books...</option>
                        <option value="exodus">Exodus</option>
                        <option value="john">John</option>
                        <option value="romans">Romans</option>
                        <option value="revelation">Revelation</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- All 5 Default Books -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-blue-500">
                    <h3 class="font-semibold text-gray-900 dark:text-white">Genesis</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">The Book of Beginnings</p>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-green-500">
                    <h3 class="font-semibold text-gray-900 dark:text-white">Psalms</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Book of Worship & Emotion</p>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-purple-500">
                    <h3 class="font-semibold text-gray-900 dark:text-white">Isaiah</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Book of Redemption & Hope</p>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-orange-500">
                    <h3 class="font-semibold text-gray-900 dark:text-white">Luke</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">The Compassionate Christ</p>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-red-500">
                    <h3 class="font-semibold text-gray-900 dark:text-white">Ephesians</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Identity & Purpose in Christ</p>
                </div>
            </div>
        </section>

        <!-- Reader Section -->
        <section id="reader-section" class="mb-12">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Genesis 1:1-3</h3>
                    <button id="explain-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                        Explain This
                    </button>
                </div>
                <div class="prose dark:prose-invert max-w-none">
                    <p class="text-gray-700 dark:text-gray-300 mb-3"><span class="font-semibold">1</span> In the beginning God created the heaven and the earth.</p>
                    <p class="text-gray-700 dark:text-gray-300 mb-3"><span class="font-semibold">2</span> And the earth was without form, and void; and darkness was upon the face of the deep. And the Spirit of God moved upon the face of the waters.</p>
                    <p class="text-gray-700 dark:text-gray-300"><span class="font-semibold">3</span> And God said, Let there be light: and there was light.</p>
                </div>
            </div>
        </section>

        <!-- Koinonia Chat Section -->
        <section id="chat-section">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg">
                <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                        <i class="fas fa-robot text-blue-500 mr-2"></i>
                        Koinonia
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Your spiritual companion</p>
                </div>
                
                <div id="chat-messages" class="h-96 overflow-y-auto p-4 space-y-4">
                    <!-- Chat messages will appear here -->
                </div>
                
                <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                    <div class="flex space-x-2">
                        <input type="text" id="message-input" 
                               placeholder="Ask Koinonia for guidance..." 
                               class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                        <button id="send-button" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors">
                            Send
                        </button>
                    </div>
                    <div class="flex space-x-2 mt-2">
                        <button class="quick-action-btn" data-prompt="prayer">üôè Prayer</button>
                        <button class="quick-action-btn" data-prompt="joke">üòÑ Joke</button>
                        <button class="quick-action-btn" data-prompt="affirmation">‚öì Truth</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Verse of the Day Section -->
        <section id="votd-section" class="mt-12 p-6 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-lg text-white">
            <h3 class="text-lg font-semibold mb-2">Verse of the Day</h3>
            <p class="text-xl italic mb-2">"For I know the plans I have for you, declares the Lord, plans for welfare and not for evil, to give you a future and a hope."</p>
            <p class="text-sm opacity-90">- Jeremiah 29:11</p>
            <div class="flex justify-between items-center mt-4">
                <button class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors">
                    Share This Light
                </button>
                <span class="text-sm opacity-75">Hidden signature included when shared</span>
            </div>
        </section>
    </div>

    <script>
        // Dark/Light Mode Toggle - FIXED
        const toggleButton = document.getElementById('theme-toggle');
        toggleButton.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            const icon = toggleButton.querySelector('i');
            if (document.documentElement.classList.contains('dark')) {
                icon.className = 'fas fa-sun text-yellow-400';
            } else {
                icon.className = 'fas fa-moon text-gray-600';
            }
        });

        // Book Select Dropdown
        const bookSelect = document.getElementById('book-select');
        bookSelect.addEventListener('change', function() {
            if (this.value) {
                addMessage(`I'd like to add ${this.value} to my library`, true);
                setTimeout(() => {
                    addMessage(`In the full app, ${this.value.charAt(0).toUpperCase() + this.value.slice(1)} would be added to your library! For now, this is a demo of the feature.`);
                }, 1000);
                this.value = ''; // Reset dropdown
            }
        });

        // Curated Content Libraries
        const jokes = [
            "Why did the coffee file a police report? It got mugged!",
            "What is a sun's favorite day of the week? Sun-day!",
            "Why did Noah have to punish the chickens? They were using fowl language!",
            "Why was the math book so sad after reading the Old Testament? Because it had too many problems!",
            "What kind of man was Boaz before he got married? Ruth-less."
        ];

        const affirmations = [
            { statement: "You are deeply loved by God.", verse: "John 3:16", reflection: "Rest in that love for a moment before you move on." },
            { statement: "God's peace is guarding your heart and mind.", verse: "Philippians 4:7", reflection: "What anxiety can you hand over to God right now?" },
            { statement: "You are strong and courageous in Christ.", verse: "Joshua 1:9", reflection: "What challenge can you face with this truth today?" },
            { statement: "You are forgiven and made new in Christ.", verse: "2 Corinthians 5:17", reflection: "What burden can you lay down because of this truth?" },
            { statement: "You are never alone; God is with you.", verse: "Matthew 28:20", reflection: "How does this change how you approach today?" }
        ];

        const prayers = [
            "Heavenly Father, I lift up this situation to You. Please bring Your peace, wisdom, and healing. Guide our steps and help us to trust in Your perfect plan. In Jesus' name, Amen.",
            "Lord Jesus, thank You for Your constant presence. I ask for Your strength and comfort in this moment. Help us to rest in Your love and provision. Amen.",
            "Father God, the Great Physician, I ask for Your healing hand to be upon us. Restore strength, calm pain, and grant peaceful rest. Surround us with Your comforting presence. In Jesus' name, Amen."
        ];

        // Chat Functionality
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');

        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const bubble = document.createElement('div');
            bubble.className = `max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${
                isUser 
                    ? 'bg-blue-500 text-white rounded-br-none' 
                    : 'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-none'
            }`;
            bubble.textContent = text;
            
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleQuickAction(promptType) {
            let response = "";
            switch(promptType) {
                case 'prayer':
                    response = prayers[Math.floor(Math.random() * prayers.length)];
                    break;
                case 'joke':
                    response = "To lighten the mood: " + jokes[Math.floor(Math.random() * jokes.length)];
                    break;
                case 'affirmation':
                    const aff = affirmations[Math.floor(Math.random() * affirmations.length)];
                    response = `‚öì ${aff.statement} (${aff.verse})\n\n${aff.reflection}`;
                    break;
            }
            addMessage(response);
        }

        // Initial greeting
        addMessage("Hello! I'm Koinonia, your spiritual companion. I'm here to help you with Bible study, prayer, or just to listen. How can I support you today?");

        // Send button event
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message) {
                addMessage(message, true);
                messageInput.value = '';
                
                // Simulate AI response
                setTimeout(() => {
                    let response = "I hear you. While I'm a simplified demo, in the full app I'd provide a thoughtful, biblically-grounded response to help you with that.";
                    
                    // Simple keyword responses for demo
                    if (message.toLowerCase().includes('stress') || message.toLowerCase().includes('overwhelmed')) {
                        response = "I hear that you're feeling stressed. Would you like to hear a lighthearted joke to reset, or shall we pray about it together?";
                    } else if (message.toLowerCase().includes('sick') || message.toLowerCase().includes('heal')) {
                        response = "I'm sorry you're not feeling well. Let me pray for you: 'Lord, please bring healing and comfort. Give wisdom and guide to medical help if needed. Amen.' Remember to rest and see a doctor if symptoms persist.";
                    } else if (message.toLowerCase().includes('save') || message.toLowerCase().includes('jesus')) {
                        response = "That's wonderful you're seeking Jesus! You can pray: 'Lord Jesus, I believe You died for my sins. Come into my heart and save me.' Then please find a local church to help you grow!";
                    } else if (message.toLowerCase().includes('hello') || message.toLowerCase().includes('hi')) {
                        response = "Hello! I'm Koinonia, your spiritual companion. I can help you study the Bible, pray, or just listen. What's on your heart today?";
                    } else if (message.toLowerCase().includes('genesis')) {
                        response = "Genesis 1:1-3 shows us God's incredible power in creating everything from nothing. He spoke light into existence, bringing order from chaos. This reminds us that the same God can bring light and order to our lives today!";
                    }
                    
                    addMessage(response);
                }, 1000);
            }
        });

        // Quick action buttons
        document.querySelectorAll('.quick-action-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                handleQuickAction(e.target.dataset.prompt);
            });
        });

        // Enter key to send
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendButton.click();
            }
        });

        // Explain button functionality
        document.getElementById('explain-btn').addEventListener('click', () => {
            addMessage("Can you explain Genesis 1:1-3?", true);
            setTimeout(() => {
                addMessage("Genesis 1:1-3 reveals God's sovereign power in creation. He speaks light into existence, transforming chaos into order. This shows us that:\n\n‚Ä¢ God is eternal and all-powerful\n‚Ä¢ His Word has creative authority\n‚Ä¢ He brings light and life where there was darkness\n‚Ä¢ The same power that created the universe is available to transform our lives today");
            }, 1000);
        });
    </script>

    <style>
        .quick-action-btn {
            @apply px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors;
        }
        .prose {
            @apply text-gray-700 dark:text-gray-300;
        }
        .prose p {
            @apply mb-3;
        }
        #votd-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        /* Custom dropdown styling */
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .dark select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23d1d5db' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        }
    </style>
</body>
</html>
